JSON –ü–∞—Ä—Å–µ—Ä

üéØ –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π JSON –ø–∞—Ä—Å–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:

    ‚úÖ –í—Å–µ —Ç–∏–ø—ã JSON: –æ–±—ä–µ–∫—Ç—ã, –º–∞—Å—Å–∏–≤—ã, —Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, boolean, null
    ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
    ‚úÖ PathIterator –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø–æ –ø—É—Ç–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤
    ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ STDIN/STDOUT
    ‚úÖ –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. JSONParser - —è–¥—Ä–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
2. PathIterator - —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ö–æ–¥–∞ –ø–æ –ø—É—Ç–∏
3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å STDIN/STDOUT

–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
1. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Å–ø—É—Å–∫ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
2. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã Go –¥–ª—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞ JSON –∑–Ω–∞—á–µ–Ω–∏–π
3. –ó–∞–º—ã–∫–∞–Ω–∏—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
4. –°—Ç—Ä–æ–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
```
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
type JSONParser struct {
    input string
    pos   int
}

// –ú–µ—Ç–æ–¥—ã –ø–∞—Ä—Å–µ—Ä–∞
Parse() ‚Üí parseValue() ‚Üí 
  ‚îú‚îÄ‚îÄ parseString()
  ‚îú‚îÄ‚îÄ parseNumber() 
  ‚îú‚îÄ‚îÄ parseObject()
  ‚îú‚îÄ‚îÄ parseArray()
  ‚îú‚îÄ‚îÄ parseBoolean()
  ‚îî‚îÄ‚îÄ parseNull()

// –°–∏—Å—Ç–µ–º–∞ –∏—Ç–µ—Ä–∞—Ü–∏–∏
PathIterator() ‚Üí createIterator()
```
üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥

1. –õ–µ–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
    –ü—Ä–æ–ø—É—Å–∫ –ø—Ä–æ–±–µ–ª–æ–≤ (skipSpace())
    –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ –ø–µ—Ä–≤–æ–º—É —Å–∏–º–≤–æ–ª—É
    –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–æ–∫–µ (pos)

2. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
    parseValue() - –¥–∏—Å–ø–µ—Ç—á–µ—Ä –ø–æ –ø–µ—Ä–≤–æ–º—É —Å–∏–º–≤–æ–ª—É
    –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
    –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (–∫–∞–≤—ã—á–∫–∏, —Å–∫–æ–±–∫–∏, –∑–∞–ø—è—Ç—ã–µ)

3. PathIterator
    –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É—Ç–µ–π: "foo.bar.0.baz"
    –†–∞–±–æ—Ç–∞ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ (map[string]interface{})
    –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏ ([]interface{})
    –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

üöÄ –ó–∞–ø—É—Å–∫ –∏ —Ä–∞–±–æ—Ç–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫
```
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–¥ –≤ —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, json_parser.go)
go build json_parser.go
./json_parser
```
2. –§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏ –ø–æ–Ω–∏–º–∞–µ—Ç –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã:

–ö–æ–º–∞–Ω–¥–∞ PARSE - —Ä–∞–∑–±–æ—Ä JSON
```
PARSE {"name": "Alice", "age": 25, "hobbies": ["reading", "swimming"]}
```
–ö–æ–º–∞–Ω–¥–∞ ITERATE - –æ–±—Ö–æ–¥ –¥–∞–Ω–Ω—ã—Ö
```
ITERATE
ITERATE hobbies
ITERATE address.city
```

3. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã
–ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
```
# –í–≤–æ–¥:
PARSE {"name": "Alice", "age": 25, "active": true}

# –ó–∞—Ç–µ–º:
ITERATE
# –í—ã–≤–æ–¥:
name: Alice
age: 25
active: true
```
–ü—Ä–∏–º–µ—Ä 2: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
```
# –í–≤–æ–¥:
PARSE {"user": {"name": "Bob", "profile": {"age": 30}}}

# –ó–∞—Ç–µ–º:
ITERATE user.profile
# –í—ã–≤–æ–¥:
age: 30
```
–ü—Ä–∏–º–µ—Ä 3: –ú–∞—Å—Å–∏–≤—ã
```
# –í–≤–æ–¥:
PARSE {"users": ["Alice", "Bob", "Charlie"]}

# –ó–∞—Ç–µ–º:
ITERATE users
# –í—ã–≤–æ–¥:
0: Alice
1: Bob
2: Charlie
```

–ü—Ä–∏–º–µ—Ä 4: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
# –í–≤–æ–¥:
PARSE {
  "users": [
    {"name": "Alice", "age": 25},
    {"name": "Bob", "age": 30}
  ],
  "count": 2
}

# –ó–∞—Ç–µ–º:
ITERATE users.0
# –í—ã–≤–æ–¥:
name: Alice
age: 25

# –ò–ª–∏:
ITERATE users.1.name
# –í—ã–≤–æ–¥:
Bob
```
4. –ü–æ–ª–Ω—ã–π —Å–µ–∞–Ω—Å —Ä–∞–±–æ—Ç—ã
```
$ ./json_parser

# –ü–∞—Ä—Å–∏–º JSON
PARSE {"name": "John", "age": 30, "hobbies": ["golf", "chess"], "address": {"city": "Moscow", "zip": "12345"}}

# –ò—Ç–µ—Ä–∏—Ä—É–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å
ITERATE
# –í—ã–≤–æ–¥:
name: John
age: 30
hobbies: [golf chess]
address: map[city:Moscow zip:12345]

# –ò—Ç–µ—Ä–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ hobbies
ITERATE hobbies
# –í—ã–≤–æ–¥:
0: golf
1: chess

# –ò—Ç–µ—Ä–∏—Ä—É–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
ITERATE address
# –í—ã–≤–æ–¥:
city: Moscow
zip: 12345

# –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ–ª–µ
ITERATE address.city
# –í—ã–≤–æ–¥:
Moscow
```
5. –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (–ø–æ—Ç–æ–∫–æ–≤—ã–π –≤–≤–æ–¥)

```
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –∫–æ–º–∞–Ω–¥–∞–º–∏
echo 'PARSE {"users": ["Alice", "Bob"]}
ITERATE users' > commands.txt

# –ü–µ—Ä–µ–¥–∞–π—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
cat commands.txt | ./json_parser
# –í—ã–≤–æ–¥:
0: Alice
1: Bob
```
6. –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
commands.txt:
```
PARSE {"products": [{"name": "laptop", "price": 999}, {"name": "mouse", "price": 25}]}
ITERATE products.0
PARSE {"status": "success", "data": {"items": [1,2,3]}}
ITERATE data.items
```
```
go run json_parser.go < commands.txt
```
üõ† –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:

    ‚úÖ –°—Ç—Ä–æ–∫–∏: "hello"
    ‚úÖ –ß–∏—Å–ª–∞: 123, -45, 3.14
    ‚úÖ –ë—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è: true, false
    ‚úÖ null: null
    ‚úÖ –û–±—ä–µ–∫—Ç—ã: {"key": "value"}
    ‚úÖ –ú–∞—Å—Å–∏–≤—ã: [1, 2, 3]

–°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—É—Ç–µ–π:

    ITERATE - –∫–æ—Ä–Ω–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å
    ITERATE users - –ø–æ–ª–µ users
    ITERATE users.0 - –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ users
    ITERATE address.city - –≤–ª–æ–∂–µ–Ω–Ω–æ–µ –ø–æ–ª–µ

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
```
# –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
PARSE {"name": "John"
# –í—ã–≤–æ–¥: Error: invalid JSON

# –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—É—Ç—å
ITERATE nonexistent
# –í—ã–≤–æ–¥: Error: key 'nonexistent' not found in object

# –í—ã—Ö–æ–¥ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –º–∞—Å—Å–∏–≤–∞
ITERATE users.5
# –í—ã–≤–æ–¥: Error: index '5' is out of range
```

üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
    1. JSON –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ (–±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤)
    2. –ö–∞–≤—ã—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π
    3. –ò–Ω–¥–µ–∫—Å—ã –º–∞—Å—Å–∏–≤–æ–≤ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0
    4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏

üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:
```
# 1. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º
go build json_parser.go

# 2. –ó–∞–ø—É—Å–∫–∞–µ–º
./json_parser

# 3. –í–≤–æ–¥–∏–º –∫–æ–º–∞–Ω–¥—ã:
PARSE {"name": "Test", "values": [10, 20, 30]}
ITERATE values
```


üéñÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

    1. –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞–∫–µ—Ç encoding/json
    2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - –æ–¥–Ω–æ–ø—Ä–æ—Ö–æ–¥–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
    3. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏
    4. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å - –ø–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞, —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –≤ Go –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è CLI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π! üöÄ







